{"version":3,"sources":["webpack:///./src/views/Account.vue?9f7a","webpack:///src/views/Account.vue","webpack:///./src/views/Account.vue?71f2","webpack:///./src/views/Account.vue?99b2","webpack:///./src/views/Account.vue?17b4"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","dataUser","photo","directives","name","rawName","value","expression","staticClass","domProps","on","$event","target","composing","$set","newUserData","_v","_s","ref","handleFileUpload","preventDefault","updateUserInformations","deleteUser","staticRenderFns","component"],"mappings":"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","file":"js/chunk-89123124.9d6cc2df.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"profile\"}},[_c('div',[_c('img',{attrs:{\"src\":_vm.dataUser.photo}})]),_c('div',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.dataUser.firstName),expression:\"dataUser.firstName\"}],staticClass:\"coordonees\",attrs:{\"type\":\"text\",\"placeholder\":\"First-name\",\"aria-label\":\"Prénom de l'utilisateur\"},domProps:{\"value\":(_vm.dataUser.firstName)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.dataUser, \"firstName\", $event.target.value)}}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.dataUser.lastName),expression:\"dataUser.lastName\"}],staticClass:\"coordonees\",attrs:{\"type\":\"text\",\"placeholder\":\"Last-name\",\"aria-label\":\"Nom de famille de l'utilisateur\"},domProps:{\"value\":(_vm.dataUser.lastName)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.dataUser, \"lastName\", $event.target.value)}}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.dataUser.email),expression:\"dataUser.email\"}],staticClass:\"coordonees\",attrs:{\"type\":\"email\",\"aria-label\":\"Email de l'utilisateur\",\"placeholder\":\"name@example.com\"},domProps:{\"value\":(_vm.dataUser.email)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.dataUser, \"email\", $event.target.value)}}}),_c('label',{attrs:{\"id\":\"img-profile\"}},[_c('div',{attrs:{\"role\":\"button\",\"aria-label\":\"Téléchargement d'un fichier\"}},[(_vm.newUserData.photo)?_c('span',[_vm._v(\"Fichier séléctionné : \"+_vm._s(_vm.newUserData.photo.name))]):_c('span',{staticClass:\"ajout\"},[_vm._v(\"Ajouter un fichier \")])]),_c('input',{ref:\"photo\",staticClass:\"fichier\",attrs:{\"type\":\"file\"},on:{\"change\":function($event){return _vm.handleFileUpload()}}})]),_c('div',{attrs:{\"id\":\"btn-profile\"}},[_c('div',[_c('button',{staticClass:\"maj\",attrs:{\"type\":\"submit\",\"aria-label\":\"Modifier les informations utilisateur\"},on:{\"click\":function($event){$event.preventDefault();return _vm.updateUserInformations($event)}}},[_vm._v(\"Mettre à jour les informations\")])]),_c('div',[_c('button',{staticClass:\"delete\",attrs:{\"type\":\"submit\",\"aria-label\":\"Supprimer l'utilisateur\"},on:{\"click\":function($event){$event.preventDefault();return _vm.deleteUser($event)}}},[_vm._v(\"Supprimer le compte\")])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"profile\">\n      <div>\n         <img v-bind:src=\"dataUser.photo\">\n      </div>\n      <div>\n          <input class=\"coordonees\" type=\"text\" placeholder=\"First-name\" aria-label=\"Prénom de l'utilisateur\" v-model=\"dataUser.firstName\"/>\n          <input class=\"coordonees\" type=\"text\" placeholder=\"Last-name\" aria-label=\"Nom de famille de l'utilisateur\" v-model=\"dataUser.lastName\"/>\n          <input class=\"coordonees\" type=\"email\" aria-label=\"Email de l'utilisateur\" placeholder=\"name@example.com\" v-model=\"dataUser.email\"/>\n          <label id=\"img-profile\">\n              <div role=\"button\" aria-label=\"Téléchargement d'un fichier\">\n                  <span v-if=\"newUserData.photo\">Fichier séléctionné : {{newUserData.photo.name}}</span>\n                  <span class=\"ajout\" v-else >Ajouter un fichier </span>\n              </div>\n              <input class=\"fichier\" type=\"file\" ref=\"photo\" v-on:change=\"handleFileUpload()\"/>\n          </label>\n          <div id=\"btn-profile\">\n              <div>\n                  <button class=\"maj\" type=\"submit\" aria-label=\"Modifier les informations utilisateur\" @click.prevent=\"updateUserInformations\">Mettre à jour les informations</button>\n              </div>\n              <div>\n                  <button class=\"delete\" type=\"submit\" aria-label=\"Supprimer l'utilisateur\" @click.prevent=\"deleteUser\">Supprimer le compte</button>\n              </div>\n          </div>\n      </div>\n  </div>\n</template>\n\n\n<script>\nimport axios from \"axios\";\nexport default {\n    name: 'account',  \n    data() {\n        return {\n          cookie: this.$cookies.get(\"token\"),\n          dataUser: {\n              firstName: '',\n              lastName: '',\n              email: '',\n              photo: ''\n          },\n          newUserData: {\n            photo: null\n          }\n        };\n    },\n    created() {\n      axios\n        .get(\"http://localhost:3000/api/users/me\", {\n          headers: { Authorization: \"Bearer \" + this.cookie }\n        })\n        .then(response => {\n          console.log(response.data);\n          this.dataUser = response.data.user;\n        })\n    },\n    methods: {\n        updateUserInformations() {\n          console.log(this.newUserData.photo);\n          if (this.newUserData.photo !== null) {\n            console.log('non null');\n            let formData = new FormData();\n            formData.append('email', this.dataUser.email);\n            formData.append('firstName', this.dataUser.firstName);\n            formData.append('lastName', this.dataUser.lastName);\n            formData.append('photo', this.newUserData.photo, this.newUserData.photo.name);\n            axios\n              .put('http://localhost:3000/api/users/me',\n                    formData,\n                    {\n                    headers: {\n                        'Content-Type': 'multipart/form-data',\n                        Authorization: \"Bearer \" + this.cookie\n                    },\n                  }\n                ).then(() => {\n                  console.log('Image téléchargée !');\n                  this.$router.go();\n              })\n              .catch(error =>\n                console.log(error)\n              );\n            } else {\n              console.log('null');\n              let formData = new FormData();\n              formData.append('email', this.dataUser.email);\n              formData.append('firstName', this.dataUser.firstName);\n              formData.append('lastName', this.dataUser.lastName);\n              formData.append('photo', this.dataUser.photo);\n              axios\n                .put('http://localhost:3000/api/users/me',\n                      formData,\n                      {\n                      headers: {\n                          'Content-Type': 'multipart/form-data',\n                          Authorization: \"Bearer \" + this.cookie\n                      },\n                    }\n                  ).then(() => {\n                    console.log('Image téléchargée !');\n                    this.$router.go();\n                })\n                .catch(error =>\n                  console.log(error)\n                );\n            }\n          },\n        loadUser() {\n          axios\n            .get(\"http://localhost:3000/api/users/me\", {\n              headers: { Authorization: \"Bearer \" + this.cookie }\n            })\n            .then(response => {\n              console.log(response.data);\n              this.dataUser = response.data.user;\n            })\n        },\n        handleFileUpload(){\n          this.newUserData.photo = this.$refs.photo.files[0];\n        },\n        deleteUser() {\n            this.$confirm(\n                {\n                    message: `Êtes-vous sur de vouloir supprimer votre compte ?`,\n                    button: {\n                        no: 'No',\n                        yes: 'Yes'\n                    },\n                    callback: confirm => {\n                        if (confirm) {\n                        const id = this.dataUser.id;\n                        axios\n                            .delete('http://localhost:3000/api/users/' + id, {\n                            headers: { Authorization: \"Bearer \" + this.cookie }\n                            })\n                            .then(response => {\n                            console.log(response.data);\n                            this.$cookies.remove(\"token\");\n                            this.$router.push(\"/signup\");\n                            })\n                            .catch(error => console.log(error))\n                        }\n                    }\n                }\n            )\n        },\n    },\n};\n</script>\n\n<style>\n    #profile {\n        text-align: center;\n    }\n    #profile div img {\n        max-width: 150px;\n        max-height: 150px;\n        width: 100%;\n        height: 100%; \n        border-radius: 150px;\n        margin-bottom: 30px;\n    }\n    .coordonees {\n        margin: 0 30px 30px 0;\n        text-align: center;\n        font-size: 1.3rem;\n        padding-bottom: 3px;\n        border-radius: 7px;\n        border: dashed 1px;\n    }\n    #img-profile {\n        display: flex;\n        justify-content: center;\n    }\n    .ajout {\n        font-size: 1.2rem;\n        padding-right: 20px;\n    }\n    .fichier {\n        font-size: 1.2rem;\n        margin-bottom: 30px;\n    }\n    #btn-profile {\n      display: flex;\n      justify-content: center;\n    }\n    .maj {\n      margin: 0 20px 0 0;\n      padding: 0 3px 5px 3px;\n      border-radius: 7px;\n      border: solid 1px;\n    }\n    .delete {\n      padding: 0 3px 5px 3px;\n      border-radius: 7px;\n      border: solid 1px;\n    }\n    @media screen and (max-width: 568px) {\n      .coordonees {\n          margin: 0 0 15px 0;\n      }\n      #img-profile {\n          flex-direction: column;\n        \n      }\n      .fichier {\n          margin: 5px 0 20px 20px;\n      }\n    }\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Account.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Account.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Account.vue?vue&type=template&id=360b970c&\"\nimport script from \"./Account.vue?vue&type=script&lang=js&\"\nexport * from \"./Account.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Account.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Account.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}