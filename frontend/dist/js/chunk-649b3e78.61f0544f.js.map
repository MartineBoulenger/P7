{"version":3,"sources":["webpack:///./src/views/AllUsersAdmin.vue?9d5a","webpack:///./src/components/UserItem.vue?8e6a","webpack:///./src/views/AllUsersAdmin.vue?2900","webpack:///./src/components/UserItem.vue?83cc","webpack:///src/components/UserItem.vue","webpack:///./src/components/UserItem.vue?f55d","webpack:///./src/components/UserItem.vue?d265","webpack:///src/views/AllUsersAdmin.vue","webpack:///./src/views/AllUsersAdmin.vue?943b","webpack:///./src/views/AllUsersAdmin.vue?e825"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","_v","_l","user","key","id","photo","firstName","lastName","email","on","$event","deleteUser","updateUser","scopedSlots","_u","fn","directives","name","rawName","value","expression","modifiers","$$selectedVal","Array","prototype","filter","call","target","options","o","selected","map","val","_value","_n","$set","multiple","option","_s","text","proxy","staticRenderFns","_t","preventDefault","updateUsers","component"],"mappings":"kHAAA,W,2DCAA,W,gECAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,cAAc,CAACF,EAAG,KAAK,CAACG,YAAY,SAAS,CAACP,EAAIQ,GAAG,8BAA8BJ,EAAG,IAAI,CAACJ,EAAIQ,GAAG,8GAA8GJ,EAAG,IAAI,CAACJ,EAAIQ,GAAG,2GAA2GJ,EAAG,IAAI,CAACJ,EAAIQ,GAAG,iDAAiDJ,EAAG,MAAM,CAACG,YAAY,kBAAkBP,EAAIS,GAAIT,EAAY,UAAE,SAASU,GAAM,OAAON,EAAG,WAAW,CAACO,IAAID,EAAKE,GAAGN,MAAM,CAAC,MAAQI,EAAKG,MAAM,UAAYH,EAAKI,UAAU,SAAWJ,EAAKK,SAAS,MAAQL,EAAKM,OAAOC,GAAG,CAAC,eAAe,SAASC,GAAQ,OAAOlB,EAAImB,WAAWT,EAAKE,KAAK,eAAe,SAASM,GAAQ,OAAOlB,EAAIoB,WAAWV,EAAKE,GAAIF,KAAQW,YAAYrB,EAAIsB,GAAG,CAAC,CAACX,IAAI,aAAaY,GAAG,WAAW,MAAO,CAACnB,EAAG,SAAS,CAACoB,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,iBAAiBC,MAAOjB,EAAe,WAAEkB,WAAW,kBAAkBC,UAAU,CAAC,QAAS,KAAQvB,MAAM,CAAC,KAAO,aAAa,GAAK,qBAAqBW,GAAG,CAAC,OAAS,SAASC,GAAQ,IAAIY,EAAgBC,MAAMC,UAAUC,OAAOC,KAAKhB,EAAOiB,OAAOC,SAAQ,SAASC,GAAG,OAAOA,EAAEC,YAAWC,KAAI,SAASF,GAAG,IAAIG,EAAM,WAAYH,EAAIA,EAAEI,OAASJ,EAAEV,MAAM,OAAO3B,EAAI0C,GAAGF,MAAQxC,EAAI2C,KAAKjC,EAAM,aAAcQ,EAAOiB,OAAOS,SAAWd,EAAgBA,EAAc,OAAO9B,EAAIS,GAAIT,EAAW,SAAE,SAAS6C,GAAQ,OAAOzC,EAAG,SAAS,CAACO,IAAIkC,EAAOlB,OAAO,CAAC3B,EAAIQ,GAAG,IAAIR,EAAI8C,GAAGD,EAAOE,MAAM,UAAS,KAAKC,OAAM,IAAO,MAAK,QAAU,MACliDC,EAAkB,GCDlB,EAAS,WAAa,IAAIjD,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACG,YAAY,QAAQ,CAACH,EAAG,MAAM,CAACA,EAAG,MAAM,CAACG,YAAY,aAAa,CAACH,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,cAAc,IAAMN,EAAIa,SAAST,EAAG,MAAM,CAACA,EAAG,IAAI,CAACJ,EAAIQ,GAAGR,EAAI8C,GAAG9C,EAAIc,WAAW,IAAId,EAAI8C,GAAG9C,EAAIe,aAAaX,EAAG,IAAI,CAACJ,EAAIQ,GAAGR,EAAI8C,GAAG9C,EAAIgB,cAAcZ,EAAG,MAAM,CAACG,YAAY,cAAc,CAACP,EAAIkD,GAAG,cAAc9C,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,SAAS,aAAa,qDAAqDW,GAAG,CAAC,MAAQ,SAASC,GAAgC,OAAxBA,EAAOiC,iBAAwBnD,EAAIoD,YAAYpD,EAAIU,SAAS,CAACV,EAAIQ,GAAG,qBAAqB,KAAKJ,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,cAAc,CAACF,EAAG,SAAS,CAACG,YAAY,aAAaD,MAAM,CAAC,aAAa,gCAAgCW,GAAG,CAAC,MAAQ,SAASC,GAAgC,OAAxBA,EAAOiC,iBAAwBnD,EAAImB,WAAWnB,EAAIU,SAAS,CAACV,EAAIQ,GAAG,8BAC70B,EAAkB,GCuBtB,GACE,KAAF,WACE,MAAF,CACI,UAAJ,CACM,KAAN,OACM,QAAN,UAEI,SAAJ,CACM,KAAN,OACM,QAAN,YAEI,MAAJ,CACM,KAAN,OACM,QAAN,8DAEI,MAAJ,CACM,KAAN,OACM,QAAN,6BAEI,KAAJ,CACM,KAAN,SAGE,QAAF,CACI,WADJ,SACA,GACM,KAAN,yBAEI,YAJJ,SAIA,GACM,KAAN,2BCpDkV,I,wBCQ9U6C,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIa,EAAAA,E,6BCOf,GACE,KAAF,gBACE,WAAF,CACI,SAAJ,GAEE,KALF,WAMI,MAAJ,CACM,OAAN,2BACM,SAAN,GACM,KAAN,CACQ,UAAR,SACQ,SAAR,WACQ,MAAR,GACQ,MAAR,GACQ,YAAR,GAEM,QAAN,CACA,CAAQ,KAAR,QAAQ,MAAR,KACA,CAAQ,KAAR,OAAQ,MAAR,QAIE,QAtBF,WAsBI,IAAJ,OACI,EAAJ,EACA,6CACM,QAAN,CAAQ,cAAR,yBAEA,kBACM,QAAN,oBACM,EAAN,mBAEA,mBACM,QAAN,WAGE,QAAF,CACI,WADJ,SACA,GAAM,IAAN,OACM,KAAN,SACA,CACQ,QAAR,iDACQ,OAAR,CACU,GAAV,KACU,IAAV,OAEQ,SAAR,YACA,IACY,EAAZ,EACA,mDACc,QAAd,CAAgB,cAAhB,sBAEA,iBAAc,OAAd,aAAgB,QAAhB,8BACA,mBAAc,OAAd,kBACY,EAAZ,kBAMI,WAvBJ,SAuBA,KAAM,IAAN,OACM,KAAN,SACA,CACQ,QAAR,uJACQ,OAAR,CACU,GAAV,KACU,IAAV,OAEQ,SAAR,YACA,IACY,QAAZ,OACY,EAAZ,EACA,kDACc,QAAd,CACgB,cAAhB,sBAEA,iBAAc,OAAd,aAAgB,QAAhB,6BACA,mBAAc,OAAd,kBACY,EAAZ,oBCtGuV,ICQnV,G,UAAY,eACd,EACAtD,EACAkD,GACA,EACA,KACA,KACA,OAIa,e","file":"js/chunk-649b3e78.61f0544f.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AllUsersAdmin.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserItem.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"all-users\"}},[_c('h1',{staticClass:\"title\"},[_vm._v(\"Gestion des utilisateurs\")]),_c('p',[_vm._v(\"Vous pouvez modifier la permission des utilisateurs en changeant le false à true puis en mettant à jour.\")]),_c('p',[_vm._v(\"Attention ! Une fois mis à jour vous n’aurez plus accès à l’utilisateur car il sera admin à son tour.\")]),_c('p',[_vm._v(\"Vous pouvez aussi supprimer un utilisateur.\")]),_c('div',{staticClass:\"all-user-items\"},_vm._l((_vm.allUsers),function(user){return _c('UserItem',{key:user.id,attrs:{\"photo\":user.photo,\"firstName\":user.firstName,\"lastName\":user.lastName,\"email\":user.email},on:{\"user-deleted\":function($event){return _vm.deleteUser(user.id)},\"user-updated\":function($event){return _vm.updateUser(user.id, user)}},scopedSlots:_vm._u([{key:\"Permission\",fn:function(){return [_c('select',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(user.permission),expression:\"user.permission\",modifiers:{\"number\":true}}],attrs:{\"name\":\"permission\",\"id\":\"permission-select\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return _vm._n(val)}); _vm.$set(user, \"permission\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},_vm._l((_vm.options),function(option){return _c('option',{key:option.value},[_vm._v(\" \"+_vm._s(option.text)+\" \")])}),0)]},proxy:true}],null,true)})}),1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"card\"},[_c('div',[_c('div',{staticClass:\"user-item\"},[_c('img',{attrs:{\"id\":\"img-profile\",\"src\":_vm.photo}}),_c('div',[_c('p',[_vm._v(_vm._s(_vm.firstName)+\" \"+_vm._s(_vm.lastName))]),_c('p',[_vm._v(_vm._s(_vm.email))])])]),_c('div',{staticClass:\"permission\"},[_vm._t(\"Permission\"),_c('button',{attrs:{\"type\":\"submit\",\"aria-label\":\"Modification de permission admin d'un utilisateur\"},on:{\"click\":function($event){$event.preventDefault();return _vm.updateUsers(_vm.user)}}},[_vm._v(\"Mettre à jour \")])],2)]),_c('div',{attrs:{\"id\":\"divDelete\"}},[_c('button',{staticClass:\"userDelete\",attrs:{\"aria-label\":\"Suppression d'un utilisateur\"},on:{\"click\":function($event){$event.preventDefault();return _vm.deleteUser(_vm.user)}}},[_vm._v(\"Supprimer le compte\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"card\">\n        <div>\n            <div class=\"user-item\">\n                <img id=\"img-profile\" :src=\"photo\">\n                <div>\n                    <p>{{ firstName }} {{ lastName }}</p>\n                    <p>{{ email }}</p>\n                </div>\n            </div>\n            <div class=\"permission\">\n                <slot name=\"Permission\"></slot>\n                <button type=\"submit\" aria-label=\"Modification de permission admin d'un utilisateur\" v-on:click.prevent=\"updateUsers(user)\">Mettre à jour\n                </button>\n            </div>\n        </div>\n        <div id=\"divDelete\">\n            <button aria-label=\"Suppression d'un utilisateur\" v-on:click.prevent=\"deleteUser(user)\" class=\"userDelete\">Supprimer le compte</button>\n        </div>\n    </div>\n</template>\n\n\n<script>\nexport default {\n    name: 'UserItem',\n    props: {\n        firstName: {\n            type: String,\n            default: 'Victor'\n        },\n        lastName: {\n            type: String,\n            default: 'Deweerdt'\n        },\n        photo: {\n            type: String,\n            default: 'http://localhost:3000/images/DSC04282.jpg1604754621573.jpg'\n        },\n        email: {\n            type: String,\n            default: 'vdeweerdt@groupomania.com'\n        },\n        user: {\n            type: String\n        }\n    },\n    methods: {\n        deleteUser(user) {\n            this.$emit('user-deleted', user);\n        },\n        updateUsers(user) {\n            this.$emit('user-updated', user);\n        }\n    }\n}\n</script>\n\n<style>\n    #img-profile {\n        max-width: 100px;\n        max-height: 100px;\n        width: 100%;\n        height: 100%; \n        border-radius: 100px;\n        margin: 25px 50px 25px 25px;\n    }\n    .user-item {\n        display: flex;\n        align-items: center;\n    }\n    .permission {\n        display: flex;\n        justify-content: space-around;\n        margin-top: 10px;\n    }\n    .userDelete {\n        margin: 15px 0;\n    }\n    #divDelete {\n        text-align: center;\n    }\n    .card {\n        border-bottom: #b1a7a6 solid 1px;\n        \n    }\n    @media screen and (max-width: 568px) {\n        #img-profile {\n        max-width: 70px;\n        max-height: 70px;\n        width: 100%;\n        height: 100%; \n        border-radius: 70px;\n        margin: 5px;\n    }\n    .user-item {\n        display: flex;\n        align-items: center;\n    }\n    .permission {\n        display: flex;\n        justify-content: space-around;\n        margin-top: 10px;\n    }\n    .userDelete {\n        margin: 15px 0;\n    }\n    #divDelete {\n        text-align: center;\n    }\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserItem.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserItem.vue?vue&type=template&id=55e7e972&\"\nimport script from \"./UserItem.vue?vue&type=script&lang=js&\"\nexport * from \"./UserItem.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserItem.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n    <div id=\"all-users\">\n        <h1 class=\"title\">Gestion des utilisateurs</h1>\n        <p>Vous pouvez modifier la permission des utilisateurs en changeant le false à true puis en mettant à jour.</p>\n        <p>Attention ! Une fois mis à jour vous n’aurez plus accès à l’utilisateur car il sera admin à son tour.</p>\n        <p>Vous pouvez aussi supprimer un utilisateur.</p> \n        <div class=\"all-user-items\">\n            <UserItem v-for=\"user in allUsers\" :photo=\"user.photo\" :firstName=\"user.firstName\" :lastName=\"user.lastName\" :email=\"user.email\"\n            v-on:user-deleted=\"deleteUser(user.id)\" v-on:user-updated=\"updateUser(user.id, user)\" :key=\"user.id\">\n            <template v-slot:Permission>\n                <select name=\"permission\" id=\"permission-select\" v-model.number=\"user.permission\">\n                    <option v-for=\"option in options\" v-bind:key=\"option.value\">\n                        {{ option.text }}\n                    </option>\n                </select>\n            </template>\n            </UserItem>\n        </div>\n    </div>\n</template>\n\n\n\n<script>\nimport UserItem from '@/components/UserItem.vue'\nimport axios from 'axios'\nexport default {\n    name: 'allUsersAdmin',\n    components: {\n        UserItem\n    },\n    data() {\n        return {\n            cookie: this.$cookies.get(\"token\"),\n            allUsers: [],\n            user: {\n                firstName: 'Victor',\n                lastName: 'Deweerdt',\n                photo: '',\n                email: '',\n                permission: false,\n            },\n            options: [\n                { text: 'false', value: '0' },\n                { text: 'true', value: '1' }\n            ],\n        }\n    },\n    created() {\n        axios\n            .get('http://localhost:3000/api/admin/users', {\n                headers: { Authorization: \"Bearer \" + this.cookie }\n            })\n            .then(response => {\n                console.log(\"users\", response.data);\n                this.allUsers = response.data;\n                })\n            .catch(error => {\n                console.log(error);\n            });\n    },\n    methods: {\n        deleteUser(id) {\n            this.$confirm(\n                {\n                    message: `Êtes-vous sur de vouloir supprimer ce compte ?`,\n                    button: {\n                        no: 'No',\n                        yes: 'Yes'\n                    },\n                    callback: confirm => {\n                        if (confirm) {\n                            axios\n                                .delete('http://localhost:3000/api/admin/users/' + id, {\n                                    headers: { Authorization: \"Bearer \" + this.cookie }\n                                })\n                                .then(() => console.log({message : 'Utilisateur supprimé !'}))\n                                .catch(error => console.log(error))\n                            this.$router.go();\n                        }\n                    }\n                }\n            )\n        },\n        updateUser(id, user) {\n            this.$confirm(\n                {\n                    message: `Attention ! Si vous modifiez la permission de cet utilisateur, vous ne pourrez plus y accéder. Les admins n'ont accès qu'aux non-admins. Continuer ?`,\n                    button: {\n                        no: 'No',\n                        yes: 'Yes'\n                    },\n                    callback: confirm => {\n                        if (confirm) {\n                            console.log(user);\n                                axios\n                                    .put('http://localhost:3000/api/admin/users/' + id, user, {\n                                        headers: { \n                                            Authorization: \"Bearer \" + this.cookie }\n                                    })\n                                    .then(() => console.log({message : 'Utilisateur modifié !'}))\n                                    .catch(error => console.log(error))\n                                this.$router.go();\n                            }\n                    }\n                }\n            )\n        }\n    }\n}\n</script>\n\n<style>\n    .all-user-items {\n        background-color: #c7c7c7;\n        border-radius: 10px;\n        width: 90%;\n        margin: 30px 15px 15px 730px;\n        width: 450px;\n    }\n    .title {\n        text-align: center;\n        margin-bottom: 20px;\n    }\n    #all-users p {\n        text-align: center;\n        margin: 0 10px;\n    }\n    @media screen and (max-width: 568px) {\n        .title {\n        text-align: center;\n        font-size: 1.7rem;\n        margin-bottom: 20px;\n        }\n        #all-users p {\n            text-align: justify;\n            margin: 0 10px;\n        }\n        .all-user-items {\n            background-color:#c7c7c7;\n            border-radius: 10px;\n            width: 90%;\n            margin: 15px;\n        }\n        #permission-select {\n            font-size: 15px;\n        }\n    }\n    \n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AllUsersAdmin.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AllUsersAdmin.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AllUsersAdmin.vue?vue&type=template&id=c301fd20&\"\nimport script from \"./AllUsersAdmin.vue?vue&type=script&lang=js&\"\nexport * from \"./AllUsersAdmin.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AllUsersAdmin.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}