(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-649b3e78"],{"12bd":function(e,t,s){"use strict";s("831a")},"831a":function(e,t,s){},bb78:function(e,t,s){"use strict";s("c734")},c734:function(e,t,s){},dcdc:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"all-users"}},[s("h1",{staticClass:"title"},[e._v("Gestion des utilisateurs")]),s("p",[e._v("Vous pouvez modifier la permission des utilisateurs en changeant le false à true puis en mettant à jour.")]),s("p",[e._v("Attention ! Une fois mis à jour vous n’aurez plus accès à l’utilisateur car il sera admin à son tour.")]),s("p",[e._v("Vous pouvez aussi supprimer un utilisateur.")]),s("div",{staticClass:"all-user-items"},e._l(e.allUsers,(function(t){return s("UserItem",{key:t.id,attrs:{photo:t.photo,firstName:t.firstName,lastName:t.lastName,email:t.email},on:{"user-deleted":function(s){return e.deleteUser(t.id)},"user-updated":function(s){return e.updateUser(t.id,t)}},scopedSlots:e._u([{key:"Permission",fn:function(){return[s("select",{directives:[{name:"model",rawName:"v-model.number",value:t.permission,expression:"user.permission",modifiers:{number:!0}}],attrs:{name:"permission",id:"permission-select"},on:{change:function(s){var i=Array.prototype.filter.call(s.target.options,(function(e){return e.selected})).map((function(t){var s="_value"in t?t._value:t.value;return e._n(s)}));e.$set(t,"permission",s.target.multiple?i:i[0])}}},e._l(e.options,(function(t){return s("option",{key:t.value},[e._v(" "+e._s(t.text)+" ")])})),0)]},proxy:!0}],null,!0)})})),1)])},n=[],r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"card"},[s("div",[s("div",{staticClass:"user-item"},[s("img",{attrs:{id:"img-profile",src:e.photo}}),s("div",[s("p",[e._v(e._s(e.firstName)+" "+e._s(e.lastName))]),s("p",[e._v(e._s(e.email))])])]),s("div",{staticClass:"permission"},[e._t("Permission"),s("button",{attrs:{type:"submit","aria-label":"Modification de permission admin d'un utilisateur"},on:{click:function(t){return t.preventDefault(),e.updateUsers(e.user)}}},[e._v("Mettre à jour ")])],2)]),s("div",{attrs:{id:"divDelete"}},[s("button",{staticClass:"userDelete",attrs:{"aria-label":"Suppression d'un utilisateur"},on:{click:function(t){return t.preventDefault(),e.deleteUser(e.user)}}},[e._v("Supprimer le compte")])])])},o=[],a={name:"UserItem",props:{firstName:{type:String,default:"Victor"},lastName:{type:String,default:"Deweerdt"},photo:{type:String,default:"http://localhost:3000/images/DSC04282.jpg1604754621573.jpg"},email:{type:String,default:"vdeweerdt@groupomania.com"},user:{type:String}},methods:{deleteUser:function(e){this.$emit("user-deleted",e)},updateUsers:function(e){this.$emit("user-updated",e)}}},u=a,l=(s("bb78"),s("2877")),c=Object(l["a"])(u,r,o,!1,null,null,null),p=c.exports,d=s("bc3a"),m=s.n(d),f={name:"allUsersAdmin",components:{UserItem:p},data:function(){return{cookie:this.$cookies.get("token"),allUsers:[],user:{firstName:"Victor",lastName:"Deweerdt",photo:"",email:"",permission:!1},options:[{text:"false",value:"0"},{text:"true",value:"1"}]}},created:function(){var e=this;m.a.get("http://localhost:3000/api/admin/users",{headers:{Authorization:"Bearer "+this.cookie}}).then((function(t){console.log("users",t.data),e.allUsers=t.data})).catch((function(e){console.log(e)}))},methods:{deleteUser:function(e){var t=this;this.$confirm({message:"Êtes-vous sur de vouloir supprimer ce compte ?",button:{no:"No",yes:"Yes"},callback:function(s){s&&(m.a.delete("http://localhost:3000/api/admin/users/"+e,{headers:{Authorization:"Bearer "+t.cookie}}).then((function(){return console.log({message:"Utilisateur supprimé !"})})).catch((function(e){return console.log(e)})),t.$router.go())}})},updateUser:function(e,t){var s=this;this.$confirm({message:"Attention ! Si vous modifiez la permission de cet utilisateur, vous ne pourrez plus y accéder. Les admins n'ont accès qu'aux non-admins. Continuer ?",button:{no:"No",yes:"Yes"},callback:function(i){i&&(console.log(t),m.a.put("http://localhost:3000/api/admin/users/"+e,t,{headers:{Authorization:"Bearer "+s.cookie}}).then((function(){return console.log({message:"Utilisateur modifié !"})})).catch((function(e){return console.log(e)})),s.$router.go())}})}}},v=f,h=(s("12bd"),Object(l["a"])(v,i,n,!1,null,null,null));t["default"]=h.exports}}]);
//# sourceMappingURL=chunk-649b3e78.61f0544f.js.map